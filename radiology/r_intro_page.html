<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ====== SUBJECT PAGE SHORTCUT SETTINGS ====== -->
<script>
/*
    ====== EDIT ONLY THIS BLOCK FOR NEW SUBJECTS ======
    Change these variables for each new subject page.
*/
window.SUBJECT_SETTINGS = {
    PAGE_ID: 'r_intro_mcqs', // Unique localStorage key for this subject
    PAGE_TITLE: 'Qbank - TUCOM -  Radiology', // Title for this subject page
    HOME_LINK: 'Radiology_qbank.html', // Home button link for this subject
};
</script>
<!-- ====== END SHORTCUT SETTINGS ====== -->

<title id="dynamic-title"></title>
<!-- Font Awesome for Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
/* 2. (Optional) Edit styles for your subject */
body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin-top: 70px;
    padding: 20px;
    background-color: #f4f4f4;
    padding-bottom: 100px;
}
.fixed-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: #17202a;
    color: #fff;
    padding: 10px 0;
    text-align: center;
    z-index: 1000;
    border-bottom: 3px solid #3498db;
}
.fixed-header .made-by-prefix { color: #cccccc; }
.fixed-header a { color: #3498db; text-decoration: none; font-weight: bold; }
.fixed-header a:hover { text-decoration: underline; }
.section {
    margin-bottom: 40px;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.section-title {
    font-size: 1.8em;
    color: #333;
    margin-bottom: 20px;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
}
.question-container {
    margin-bottom: 25px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #fff;
}
.question-container.answered { background-color: #f9f9f9; }
.question-number { font-weight: bold; color: #555; margin-right: 5px; }
.question-text { font-size: 1.1em; color: #333; margin-bottom: 15px; }
ul.options { list-style: none; padding: 0; margin: 0; }
li.option {
    background-color: #f1f1f1;
    margin-bottom: 10px;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    border: 1px solid #ccc;
    position: relative;
    user-select: none;
}
li.option:hover:not(.answered li.option) { background-color: #e0e0e0; }
.question-container.answered li.option:hover { background-color: #f1f1f1; }
li.option.correct:hover { background-color: #d4edda !important; }
li.option.incorrect:hover { background-color: #f8d7da !important; }
li.option.reveal-correct:hover { background-color: #d4edda !important; }
li.option.correct {
    background-color: #d4edda;
    border-color: #c3e6cb;
    color: #155724;
    font-weight: bold;
}
li.option.incorrect {
    background-color: #f8d7da;
    border-color: #f5c6cb;
    color: #721c24;
    font-weight: bold;
}
.feedback { display: none; font-weight: bold; margin-left: 10px; }
li.option.correct .feedback,
li.option.incorrect .feedback { display: inline; }
.correct .feedback { color: #155724; }
.incorrect .feedback { color: #721c24; }
li.option.reveal-correct {
    background-color: #d4edda !important;
    border-color: #c3e6cb !important;
    color: #155724 !important;
    font-weight: bold !important;
}
.explanation {
    display: none;
    margin-top: 15px;
    padding: 10px;
    background-color: #e9ecef;
    border: 1px solid #ced4da;
    border-radius: 4px;
    color: #495057;
    font-size: 0.95em;
}
.section-score {
    margin-top: 30px;
    font-size: 1.2em;
    font-weight: bold;
    color: #333;
    text-align: center;
    padding: 10px;
    background-color: #e7f3ff;
    border: 1px solid #b3d7ff;
    border-radius: 5px;
}
.bottom-nav-container {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1001;
    display: flex;
    gap: 15px;
}
.main-button {
    background-color: #3498db;
    color: #fff;
    padding: 8px 16px;
    font-size: 0.9em;
    text-decoration: none;
    font-weight: bold;
    border-radius: 25px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}
.main-button i { margin-right: 8px; }
.main-button:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.25); }
a.main-button:hover { background-color: #2980b9; }
#reset-button { background-color: #e74c3c; }
#reset-button:hover { background-color: #c0392b; }
</style>
</head>
<body>
<div class="fixed-header">
    <span class="made-by-prefix">Made by </span><a href="https://t.me/s/Ali_dicaprio" target="_blank">Ali Hussein</a>
</div>

<!-- 
3. COPY/EDIT: Add your sections and questions below.
   - Each section needs a unique data-section-id (e.g., 1, 2, 3, ...)
   - Each question-container needs a unique data-question-id within its section.
   - Edit section titles and questions for your subject.
-->
   

    <div class="section" data-section-id="2">
    <h2 class="section-title">Radiology Questions</h2>

    <!-- Question 1 (Source: Question 2) -->
    <div class="question-container" data-question-id="q1">
        <p class="question-text"><span class="question-number">2.</span> Regarding ultrasound all are true except</p>
        <ul class="options">
            <li class="option" data-correct="false">A. The advantage of ultrasound is Cheap, available with non-ionizing radiation</li>
            <li class="option" data-correct="true">B. The main advantage is operator dependent</li>
            <li class="option" data-correct="false">C. Convex probe with3-5 frequency used for abdominal organ examination like liver and kidneys</li>
            <li class="option" data-correct="false">D. Superficial probe with higher frequency 5-10 used with superficial and small parts examination like scrotal and transvaginal us.</li>
        </ul>
        <p class="explanation">
            Correct answer: B<br>
            a. True. These are significant advantages of ultrasound.<br>
            b. False. Operator dependence is a significant disadvantage or limitation of ultrasound, not an advantage.<br>
            c. True. Lower frequency convex probes (typically 2-5 MHz) are used for deeper structures like abdominal organs.<br>
            d. True. Higher frequency linear probes are used for superficial structures; transvaginal probes are also higher frequency.
        </p>
    </div>

    <!-- Question 2 (Source: Question 5) -->
    <div class="question-container" data-question-id="q2">
        <p class="question-text"><span class="question-number">5.</span> Regarding CT scan examination:</p>
        <ul class="options">
            <li class="option" data-correct="false">A. Motion artifacts are of more concern in CT scan than MRI.</li>
            <li class="option" data-correct="false">B. Acute bleed is black.</li>
            <li class="option" data-correct="false">C. Calcified lesions good visualized by MRI.</li>
            <li class="option" data-correct="false">D. Ionizing radiation is of no concern..</li>
            <li class="option" data-correct="true">E. Air and fat appear black on CT .</li>
        </ul>
        <p class="explanation">
            Correct answer: E<br>
            a. Incorrect. MRI scans are longer and generally more susceptible to motion artifacts.<br>
            b. Incorrect. Acute hemorrhage on a non-contrast CT typically appears hyperdense (white).<br>
            c. Incorrect. CT is far superior to MRI for visualizing calcifications.<br>
            d. Incorrect. CT scans utilize ionizing radiation, which is a concern.<br>
            e. Correct. Air and fat are low-density tissues and appear hypodense (dark or black) on CT images.
        </p>
    </div>

    <!-- Question 3 (Source: Question 15) -->
    <div class="question-container" data-question-id="q3">
        <p class="question-text"><span class="question-number">15.</span> Regarding mammography all true except:</p>
        <ul class="options">
            <li class="option" data-correct="false">A. Mammography can detect breast cancer when it is very small 2-3 years before we feel it</li>
            <li class="option" data-correct="false">B. American cancer association and America collage of radiology suggest that all women aft years should undergo annual mammography</li>
            <li class="option" data-correct="false">C. A women between 40-50 year should have one done every alternate year</li>
            <li class="option" data-correct="true">D. Young women less than 40 years can do mammography safely with no contraindications</li>
        </ul>
        <p class="explanation">
            Correct answer: D<br>
            a. True. Mammography aims to detect cancers at an early, often impalpable stage.<br>
            b. True. For certain age groups, annual screening is often recommended by these organizations.<br>
            c. True. Some guidelines suggest screening every 1-2 years for this age group.<br>
            d. False. Mammography is not routinely recommended for screening in women < 40 without specific indications due to lower incidence, breast density, and radiation concerns.
        </p>
    </div>

    <!-- Question 4 (Source: Question 20) -->
    <div class="question-container" data-question-id="q4">
        <p class="question-text"><span class="question-number">20.</span> Regarding CT scan</p>
        <ul class="options">
            <li class="option" data-correct="false">A. Native (non contrast) chest CT scan is the imaging modality of choice for diagnosis of pulmonary embolism</li>
            <li class="option" data-correct="false">B. The examination modality of choice for most of emergency conditions in trauma and acute abdomen cases</li>
            <li class="option" data-correct="false">C. No contrast needed for evaluation of internal organs injury like liver or kidney lacerations</li>
            <li class="option" data-correct="true">D. The imaging modality of choice for diagnosis of ureteric stone</li>
        </ul>
        <p class="explanation">
            Correct answer: D<br>
            a. Incorrect. CT Pulmonary Angiography (CTPA), requiring IV contrast, is the modality of choice for PE.<br>
            b. Incorrect. While CT is important, it's not universally "the modality of choice for most" emergency conditions.<br>
            c. Incorrect. IV contrast is essential for evaluating solid organ injuries like liver or kidney lacerations.<br>
            d. Correct. Non-contrast CT KUB is the gold standard for detecting ureteric stones.
        </p>
    </div>

    <!-- Question 5 (Source: Question 26) -->
    <div class="question-container" data-question-id="q5">
        <p class="question-text"><span class="question-number">26.</span> Regarding ultrasound, choice incorrect answer.</p>
        <ul class="options">
            <li class="option" data-correct="true">A. The disadvantage of ultrasound is cheap, available with non-ionizing radiation</li>
            <li class="option" data-correct="false">B. The main disadvantage is operator dependent</li>
            <li class="option" data-correct="false">C. For gall bladder ultrasound patient better to be fasting</li>
            <li class="option" data-correct="false">D. Preferred imaging modality for the diagnosis and monitoring of pregnant woman and their coming babes</li>
            <li class="option" data-correct="false">E. Is a real time dynamic study used for biopsy and doppler study</li>
        </ul>
        <p class="explanation">
            Correct answer: A<br>
            a. Incorrect statement. Being cheap, available, and using non-ionizing radiation are advantages, not disadvantages.<br>
            b. Correct statement. Operator dependence is a significant disadvantage of ultrasound.<br>
            c. Correct statement. Fasting allows the gallbladder to distend, improving visualization.<br>
            d. Correct statement. Ultrasound is preferred in pregnancy due to its safety.<br>
            e. Correct statement. Ultrasound provides real-time imaging for guiding biopsies and Doppler studies.
        </p>
    </div>

    <!-- Question 6 (Source: Question 27) -->
    <div class="question-container" data-question-id="q6">
        <p class="question-text"><span class="question-number">27.</span> Regarding MRI ,choice incorrect answer.</p>
        <ul class="options">
            <li class="option" data-correct="false">A. Pacemakers and cochlear implants and body shells are contraindications for examination</li>
            <li class="option" data-correct="false">B. Of value in diagnosis of acute brain ischemia by DWI sequence</li>
            <li class="option" data-correct="true">C. Claustrophobia is the main disadvantage of the open MRI</li>
            <li class="option" data-correct="false">D. the examination modality of choice for joints problems</li>
            <li class="option" data-correct="false">E. no radiation</li>
        </ul>
        <p class="explanation">
            Correct answer: C<br>
            a. Correct statement. These are generally true contraindications (though MRI-conditional devices exist).<br>
            b. Correct statement. Diffusion-Weighted Imaging (DWI) on MRI is highly sensitive for acute ischemic stroke.<br>
            c. Incorrect statement. Open MRI systems were designed to reduce claustrophobia, not make it a main disadvantage.<br>
            d. Correct statement. MRI is excellent for evaluating soft tissues of joints.<br>
            e. Correct statement. MRI uses magnetic fields and radio waves, not ionizing radiation.
        </p>
    </div>

    <div class="section-score" id="score-section-2">Score: 0 / 6</div>
</div>

<div class="bottom-nav-container">
    <a href="#" class="main-button" id="home-button">
        <i class="fas fa-home"></i> Home
    </a>
    <button id="reset-button" class="main-button">
        <i class="fas fa-sync-alt"></i> Reset
    </button>
</div>

<script>
// ====== SUBJECT PAGE SHORTCUT LOGIC ======
const PAGE_ID = window.SUBJECT_SETTINGS.PAGE_ID;
const ANSWERS_KEY = `${PAGE_ID}_answers`;
const SCORES_KEY = `${PAGE_ID}_scores`;

// Set dynamic title and home button
document.title = window.SUBJECT_SETTINGS.PAGE_TITLE;
document.getElementById('dynamic-title')?.remove(); // Remove if exists
const homeBtn = document.getElementById('home-button');
if (homeBtn) homeBtn.href = window.SUBJECT_SETTINGS.HOME_LINK;

// ...rest of your script (no changes needed below this line)...
const sections = document.querySelectorAll('.section');
let sectionScores = {};

function saveState(sectionId, questionId, selectedOptionIndex, currentScore, totalQuestions) {
    let answers = JSON.parse(localStorage.getItem(ANSWERS_KEY)) || {};
    if (!answers[sectionId]) answers[sectionId] = {};
    answers[sectionId][questionId] = {
        selectedOptionIndex: selectedOptionIndex,
        answered: true
    };
    localStorage.setItem(ANSWERS_KEY, JSON.stringify(answers));

    let scores = JSON.parse(localStorage.getItem(SCORES_KEY)) || {};
    scores[sectionId] = { score: currentScore, total: totalQuestions };
    localStorage.setItem(SCORES_KEY, JSON.stringify(scores));
}

function applyOptionSelectionLogic(optionElement, questionContainer, isLoadTime = false) {
    const explanation = questionContainer.querySelector('.explanation');
    const allOptionsInQuestion = questionContainer.querySelectorAll('.option');
    const section = questionContainer.closest('.section');
    const sectionId = section.dataset.sectionId;
    const scoreDisplay = section.querySelector(`#score-section-${sectionId}`);
    const totalQuestionsInSection = section.querySelectorAll('.question-container').length;

    if (questionContainer.classList.contains('answered') && !isLoadTime) return;
    questionContainer.classList.add('answered');

    const isCorrect = optionElement.dataset.correct === 'true';

    let feedbackSpan = optionElement.querySelector('.feedback');
    if (!feedbackSpan) {
        feedbackSpan = document.createElement('span');
        feedbackSpan.className = 'feedback';
        optionElement.appendChild(feedbackSpan);
    }
    feedbackSpan.style.display = 'inline';

    if (isCorrect) {
        optionElement.classList.add('correct');
        feedbackSpan.textContent = ' ✓ Correct!';
        if (!isLoadTime) sectionScores[sectionId]++;
    } else {
        optionElement.classList.add('incorrect');
        feedbackSpan.textContent = ' ✗ Incorrect.';
        allOptionsInQuestion.forEach(opt => {
            if (opt.dataset.correct === 'true') {
                opt.classList.add('reveal-correct');
                let correctFeedback = opt.querySelector('.feedback');
                if (!correctFeedback) {
                    correctFeedback = document.createElement('span');
                    correctFeedback.className = 'feedback';
                    opt.appendChild(correctFeedback);
                }
                correctFeedback.textContent = ' ✓ Correct Answer';
                correctFeedback.style.display = 'inline';
            }
        });
    }

    if (explanation) explanation.style.display = 'block';
    allOptionsInQuestion.forEach(opt => { opt.style.cursor = 'default'; });

    if (scoreDisplay) {
        scoreDisplay.textContent = `Score: ${sectionScores[sectionId]} / ${totalQuestionsInSection}`;
    }

    if (!isLoadTime) {
        const optionIndex = Array.from(allOptionsInQuestion).indexOf(optionElement);
        saveState(sectionId, questionContainer.dataset.questionId, optionIndex, sectionScores[sectionId], totalQuestionsInSection);
    }
}

function loadState() {
    const savedAnswersData = JSON.parse(localStorage.getItem(ANSWERS_KEY));
    const savedScoresData = JSON.parse(localStorage.getItem(SCORES_KEY));

    sections.forEach(section => {
        const sectionId = section.dataset.sectionId;
        const totalQuestionsInSection = section.querySelectorAll('.question-container').length;
        sectionScores[sectionId] = (savedScoresData && savedScoresData[sectionId]) ? savedScoresData[sectionId].score : 0;

        const scoreDisplay = section.querySelector(`#score-section-${sectionId}`);
        if (scoreDisplay) {
            scoreDisplay.textContent = `Score: ${sectionScores[sectionId]} / ${totalQuestionsInSection}`;
        }

        if (savedAnswersData && savedAnswersData[sectionId]) {
            const questionsInSection = section.querySelectorAll('.question-container');
            questionsInSection.forEach(qc => {
                const questionId = qc.dataset.questionId;
                const qData = savedAnswersData[sectionId][questionId];
                if (qData && qData.answered && typeof qData.selectedOptionIndex === 'number') {
                    const optionsInQ = qc.querySelectorAll('.option');
                    const selectedOptionEl = optionsInQ[qData.selectedOptionIndex];
                    if (selectedOptionEl) {
                        applyOptionSelectionLogic(selectedOptionEl, qc, true);
                    }
                }
            });
        }
    });
}

function resetState() {
    localStorage.removeItem(ANSWERS_KEY);
    localStorage.removeItem(SCORES_KEY);

    sections.forEach(section => {
        const sectionId = section.dataset.sectionId;
        sectionScores[sectionId] = 0;
        const totalQuestionsInSection = section.querySelectorAll('.question-container').length;
        const scoreDisplay = section.querySelector(`#score-section-${sectionId}`);

        section.querySelectorAll('.question-container').forEach(qc => {
            qc.classList.remove('answered');
            const explanation = qc.querySelector('.explanation');
            if (explanation) explanation.style.display = 'none';

            qc.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect', 'reveal-correct');
                opt.style.cursor = 'pointer';
                const feedback = opt.querySelector('.feedback');
                if (feedback) {
                    feedback.textContent = '';
                    feedback.style.display = 'none';
                }
            });
        });

        if (scoreDisplay) {
            scoreDisplay.textContent = `Score: 0 / ${totalQuestionsInSection}`;
        }
    });
}

// Save total number of questions for summary use (main page)
document.addEventListener('DOMContentLoaded', function() {
    const totalQuestions = document.querySelectorAll('.question-container').length;
    let scores = JSON.parse(localStorage.getItem(SCORES_KEY)) || {};
    scores['all'] = scores['all'] || {};
    scores['all'].total = totalQuestions;
    localStorage.setItem(SCORES_KEY, JSON.stringify(scores));
});

document.addEventListener('DOMContentLoaded', () => {
    sections.forEach(section => {
        const sectionId = section.dataset.sectionId;
        sectionScores[sectionId] = 0;
    });

    loadState();

    sections.forEach(section => {
        const options = section.querySelectorAll('.option');
        options.forEach(option => {
            option.addEventListener('click', function() {
                const questionContainer = this.closest('.question-container');
                applyOptionSelectionLogic(this, questionContainer, false);
            });
        });
    });

    const resetButton = document.getElementById('reset-button');
    if (resetButton) {
        resetButton.addEventListener('click', resetState);
    }
});
</script>

</body>
</html>